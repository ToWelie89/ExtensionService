<html>
  <head>
    <title>Hej</title>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        async function getFileFromUrl(url, name, defaultType = 'image/jpeg'){
            const response = await fetch(url);
            const data = await response.blob();
            return new File([data], name, {
                type: data.type || defaultType,
            });
        }

        document.getElementById("mypdf").onchange = function () {
          let input = this.files[0];
          let formData = new FormData();
          console.log(input)

          formData.append("mypdf", input);
          fetch("http://127.0.0.1:4000/upload_pdf", {
            method: "POST",
            body: formData,
          }).then(res => res.text()).then(res => {
            console.log(res);
            document.getElementById('result_pdf').innerText = res;
          })
        };

        document.getElementById("mypic").onchange = function () {
          let input = this.files[0];
          let formData = new FormData();
          console.log(input)

          formData.append("mypic", input);
          fetch("http://127.0.0.1:4000/upload_pic", {
            method: "POST",
            body: formData,
          }).then(res => res.text()).then(res => {
            console.log(res);
            document.getElementById('result_pic').innerText = res;
          })
        };
      });
    </script>
  </head>
  <body>
    <h1>Extension Service</h1>
    <h3>
      Upload PDF
    </h3>
    <p>
      <input
        type="file"
        id="mypdf"
        name="mypdf"
        value="Open PDF"
        accept="application/pdf"
      />
      <p id="result_pdf"></p>
    </p>
    <h3>
      Upload image file
    </h3>
    <p>
      <input
        type="file"
        id="mypic"
        name="mypic"
        value="Open image"
        accept=".jpg,.png"
      />
      <p id="result_pic"></p>
    </p>
  </body>
</html>
